"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[431],{431:(B,m,d)=>{d.r(m),d.d(m,{HomeModule:()=>k});var T=d(177),g=d(635),i=d(808);let w=(()=>{class o{constructor(e){this.opt=e,this.dataTableChanged=new i.bkB,e&&this._setDataTable(e.dataTable,e.firstRowIsData)}send(){void 0!==this.query&&this.query.send(e=>{this.setDataTable(e.getDataTable()),this.opt.queryCallback&&this.opt.queryCallback(e)})}init(e){e&&(this.opt=e),void 0!==this.tid&&(window.clearInterval(this.tid),this.tid=void 0),this.opt.dataSourceUrl?(this.query=new google.visualization.Query(this.opt.dataSourceUrl),this.opt.query&&this.query.setQuery(this.opt.query),void 0!==this.opt.timeout&&this.query.setTimeout(this.opt.timeout),this.opt.refreshInterval&&(this.tid=window.setInterval(()=>{this.send()},1e3*this.opt.refreshInterval)),this.send()):this.setDataTable(this.opt.dataTable)}getDataTable(){return this.dataTable}setDataTable(e,t){void 0===t&&(t=this.opt.firstRowIsData),this._setDataTable(e,t),this.dataTableChanged.emit(this.dataTable)}_setDataTable(e,t){Array.isArray(e)&&(e=google.visualization.arrayToDataTable(e,t)),this.dataTable=e,this.reformat()}reformat(){const e=this.dataTable;if(void 0!==e&&void 0!==this.opt.formatters)for(const t of this.opt.formatters){let a;if("PatternFormat"===t.type){const s=t.options;a=new google.visualization.PatternFormat(s.pattern),a.format(e,t.columns,s.dstColumnIndex);continue}const r=google.visualization[t.type],n=t.options;if(a=new r(n),"ColorFormat"===t.type&&n){const s=n;if(s.ranges)for(const l of s.ranges)typeof l.fromBgColor<"u"&&typeof l.toBgColor<"u"?a.addGradientRange(l.from,l.to,l.color,l.fromBgColor,l.toBgColor):a.addRange(l.from,l.to,l.color,l.bgcolor)}for(const s of t.columns)a.format(e,s)}}}return o.\u0275fac=function(e){i.QTQ()},o.\u0275dir=i.FsC({type:o,outputs:{dataTableChanged:"dataTableChanged"}}),o})(),y=(()=>{class o{constructor(e){this.el=e}setPosition(e,t){this.el.nativeElement.style.left=e+o.PIXELS,this.el.nativeElement.style.top=t+o.PIXELS}getDOMElement(){return this.el}}return o.PIXELS="px",o})(),f=(()=>{class o{constructor(e,t){this.googleChartsSettings=t,this.loadedPackages=[],this.loaded=!1,this.googleChartsSettings=Object.assign(Object.assign({},{googleChartsVersion:"50",language:e}),this.googleChartsSettings),this.googleScriptLoadingNotifier=new i.bkB,this.googleChartLoadingNotifier=new i.bkB,this.googleScriptIsLoading=!1,this.googleChartIsLoading=!1,this.loadGoogleChartsScriptPromise=new Promise((r,n)=>{if(typeof google<"u"&&google.charts)r();else if(this.googleScriptIsLoading)this.googleScriptLoadingNotifier.subscribe(s=>{s?r():n()});else{this.googleScriptIsLoading=!0;const s=document.createElement("script");s.type="text/javascript",s.src="https://www.gstatic.com/charts/loader.js",s.async=!0,s.defer=!0,s.onload=()=>{this.googleScriptIsLoading=!1,this.googleScriptLoadingNotifier.emit(!0),r()},s.onerror=()=>{this.googleScriptIsLoading=!1,this.googleScriptLoadingNotifier.emit(!1),n()},document.getElementsByTagName("head")[0].appendChild(s)}})}load(e){return(0,g.sH)(this,void 0,void 0,function*(){yield this.loadGoogleChartsScriptPromise,yield new Promise(t=>{this.googleChartIsLoading?this.googleChartLoadingNotifier.subscribe(()=>{this.doLoad(t,e)}):this.doLoad(t,e)})})}doLoad(e,t){if(!(t=Object.assign(Object.assign({},this.googleChartsSettings),t)).packages&&this.loaded)return void e();if(t.packages){let r=t.packages.filter(n=>this.loadedPackages.indexOf(n)<0);if(0==r.length&&this.loaded)return void e();t.packages=r}const a=t;a.callback=()=>{this.googleChartIsLoading=!1,void 0!==a.packages&&(this.loadedPackages=this.loadedPackages.concat(a.packages)),this.loaded=!0,this.googleChartLoadingNotifier.emit(),e()},this.googleChartIsLoading=!0,google.charts.load(t.googleChartsVersion,a)}}return o.\u0275fac=function(e){return new(e||o)(i.KVO(i.xe9),i.KVO("googleChartsSettings",8))},o.\u0275prov=i.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=function(o){return o.AnnotationChart="AnnotationChart",o.AreaChart="AreaChart",o.BarChart="BarChart",o.BubbleChart="BubbleChart",o.Calendar="Calendar",o.CandlestickChart="CandlestickChart",o.ColumnChart="ColumnChart",o.ComboChart="ComboChart",o.Gantt="Gantt",o.Gauge="Gauge",o.GeoChart="GeoChart",o.Histogram="Histogram",o.LineChart="LineChart",o.Map="Map",o.OrgChart="OrgChart",o.PieChart="PieChart",o.Sankey="Sankey",o.ScatterChart="ScatterChart",o.SteppedAreaChart="SteppedAreaChart",o.Table="Table",o.Timeline="Timeline",o.TreeMap="TreeMap",o.VegaChart="VegaChart",o.WordTree="WordTree",o}(C||{});let O=(()=>{class o{constructor(e,t){this.el=e,this.loaderService=t,this.selectListener=()=>{const a={message:"select",row:null,column:null,selectedRowValues:[],selectedRowFormattedValues:[],columnLabel:""},r=this.wrapper.visualization.getSelection(),n=r[r.length-1];if(!n)return a.message="deselect",a;const s=n;if(null!=n.row){a.row=s.row;const l=[],c=[],p=this.wrapper.getDataTable(),E=p.getNumberOfColumns();for(let u=0;u<E;u++)l.push(p.getValue(s.row,u)),c.push(p.getFormattedValue(s.row,u));a.selectedRowValues=l,a.selectedRowFormattedValues=c}return null!=s.column&&(a.column=s.column,a.columnLabel=this.getColumnLabelAtPosition(s)),n.name&&(a.columnLabel=n.name),a},this.chartSelect=new i.bkB,this.chartSelectOneTime=new i.bkB,this.chartReady=new i.bkB,this.chartReadyOneTime=new i.bkB,this.chartError=new i.bkB,this.chartErrorOneTime=new i.bkB,this.mouseOver=new i.bkB,this.mouseOverOneTime=new i.bkB,this.mouseOut=new i.bkB,this.mouseOutOneTime=new i.bkB,this.regionClick=new i.bkB,this.regionClickOneTime=new i.bkB}ngOnInit(){this.HTMLel=this.el.nativeElement.querySelector("div"),Object.isExtensible(this.data)&&(this.data.component=this),this.options=this.data.options,this.init().then(()=>{this.draw()})}init(){return(0,g.sH)(this,void 0,void 0,function*(){yield this.loaderService.load(),this.recreateWrapper()})}recreateWrapper(){if(void 0===this.wrapper||this.wrapper.getChartType()!==this.data.chartType){this.dataTable=new w(this.data),this.dataTable.dataTableChanged.subscribe(t=>{this._draw()});let e=this.data;if(this.data.firstRowIsData&&(e=Object.assign(e,this.data),e.dataTable=this.dataTable.getDataTable()),this.wrapper=new google.visualization.ChartWrapper(e),this.registerChartWrapperEvents(),void 0===e.dataTable&&void 0===e.dataSourceUrl)try{this.wrapper.draw(this.HTMLel)}catch{}}}_draw(){return(0,g.sH)(this,void 0,void 0,function*(){const e=this.dataTable.getDataTable();void 0!==e&&(this.convertOptions(),this.recreateWrapper(),this.wrapper.setOptions(this.options),this.wrapper.setDataTable(e),this.wrapper.draw(this.HTMLel))})}getDataTable(){return this.dataTable}draw(e){void 0===e&&(e=this.data),this.options=e.options,this.dataTable.init(e)}getSelectorBySeriesType(e){return{bars:"bar#%s#%r",haxis:"hAxis#0#label",line:"point#%s#%r",legend:"legendentry#%s",area:"point#%s#%r"}[e]}getSeriesByColumn(e){let t=0;const a=this.wrapper.getDataTable();for(let r=e-1;r>=0;r--){const n=a.getColumnRole(r),s=a.getColumnType(r);("data"===n||"number"===s)&&t++}return t}getBoundingBoxForItem(e){let t={top:0,left:0,width:0,height:0};if(this.cli){const a=e.column,r=this.getSeriesByColumn(a),n=e.row;let s=this.options.seriesType;if(this.options.series&&this.options.series[r]&&this.options.series[r].type&&(s=this.options.series[r].type),s){let l=this.getSelectorBySeriesType(s);if(l){l=l.replace("%s",r+"").replace("%c",a+"").replace("%r",n+"");const c=this.cli.getBoundingBox(l);c&&(t=c)}}}return t}getValueAtPosition(e){return null==e.row?null:this.wrapper.getDataTable().getValue(e.row,e.column)}getColumnTypeAtPosition(e){return this.wrapper.getDataTable().getColumnType(e.column)||""}getColumnLabelAtPosition(e){return this.wrapper.getDataTable().getColumnLabel(e.column)||""}getHTMLTooltip(){const e=new i.aKT(this.el.nativeElement.querySelector(".google-visualization-tooltip"));return new y(e)}parseMouseEvent(e){const t=this.wrapper.getChartType();let a=e.column;null==a&&(a="Timeline"===t?3===this.wrapper.getDataTable().getNumberOfColumns()?0:1:0);const n={row:e.row,column:a};return{position:e,boundingBox:this.getBoundingBoxForItem(n),value:this.getValueAtPosition(n),columnType:this.getColumnTypeAtPosition(n),columnLabel:this.getColumnLabelAtPosition(n)}}registerChartEvents(){const e=this.wrapper.getChart();this.cli=e.getChartLayoutInterface?e.getChartLayoutInterface():null,this.mouseOver.observers.length>0&&google.visualization.events.addListener(e,"onmouseover",t=>{const a=this.parseMouseEvent(t);a.tooltip=this.getHTMLTooltip(),this.mouseOver.emit(a)}),this.mouseOverOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(e,"onmouseover",t=>{const a=this.parseMouseEvent(t);a.tooltip=this.getHTMLTooltip(),this.mouseOverOneTime.emit(a)}),this.mouseOut.observers.length>0&&google.visualization.events.addListener(e,"onmouseout",t=>{const a=this.parseMouseEvent(t);this.mouseOut.emit(a)}),this.mouseOutOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(e,"onmouseout",t=>{const a=this.parseMouseEvent(t);this.mouseOutOneTime.emit(a)}),"GeoChart"===this.data.chartType&&(this.regionClick.observers.length>0&&google.visualization.events.addListener(e,"regionClick",t=>{this.regionClick.emit(t)}),this.regionClickOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(e,"regionClick",t=>{this.regionClick.emit(t)}))}registerChartWrapperEvents(){google.visualization.events.addListener(this.wrapper,"ready",()=>{this.chartReady.emit({message:"Chart ready"})}),google.visualization.events.addOneTimeListener(this.wrapper,"ready",()=>{this.chartReadyOneTime.emit({message:"Chart ready (one time)"}),this.registerChartEvents()}),google.visualization.events.addListener(this.wrapper,"error",e=>{this.chartError.emit(e)}),google.visualization.events.addOneTimeListener(this.wrapper,"error",e=>{this.chartErrorOneTime.emit(e)}),this.addListener(this.wrapper,"select",this.selectListener,this.chartSelect),this.addOneTimeListener(this.wrapper,"select",this.selectListener,this.chartSelectOneTime)}addListener(e,t,a,r){google.visualization.events.addListener(e,t,()=>{r.emit(a())})}addOneTimeListener(e,t,a,r){google.visualization.events.addOneTimeListener(e,t,()=>{r.emit(a())})}convertOptions(){try{this.options=google.charts[this.data.chartType].convertOptions(this.options)}catch{return}}}return o.\u0275fac=function(e){return new(e||o)(i.rXU(i.aKT),i.rXU(f))},o.\u0275cmp=i.VBU({type:o,selectors:[["google-chart"]],inputs:{data:"data"},outputs:{chartReady:"chartReady",chartReadyOneTime:"chartReadyOneTime",chartError:"chartError",chartErrorOneTime:"chartErrorOneTime",chartSelect:"chartSelect",chartSelectOneTime:"chartSelectOneTime",mouseOver:"mouseOver",mouseOverOneTime:"mouseOverOneTime",mouseOut:"mouseOut",mouseOutOneTime:"mouseOutOneTime",regionClick:"regionClick",regionClickOneTime:"regionClickOneTime"},decls:1,vars:0,template:function(e,t){1&e&&i.nrm(0,"div")},encapsulation:2}),o})(),S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.$C({type:o}),o.\u0275inj=i.G2t({providers:[f]}),o})(),v=(()=>{class o{constructor(){this.pieChart={chartType:C.PieChart,dataTable:[["Task","Hours per Day"],["Work",11],["Eat",2],["Commute",2],["Watch TV",2],["Sleep",7]],options:{title:"Tasks"}}}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275cmp=i.VBU({type:o,selectors:[["app-home"]],decls:1,vars:1,consts:[[3,"data"]],template:function(t,a){1&t&&i.nrm(0,"google-chart",0),2&t&&i.Y8G("data",a.pieChart)},dependencies:[O]})}return o})();var b=d(678);const L=[{path:"",component:v}];let D=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275mod=i.$C({type:o});static#o=this.\u0275inj=i.G2t({imports:[b.iI.forChild(L),b.iI]})}return o})(),k=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275mod=i.$C({type:o,bootstrap:[v]});static#o=this.\u0275inj=i.G2t({imports:[T.MD,D,S]})}return o})()}}]);